<div class="row content ">
	<div class="col-3">
		<!-- Container to display Input file or Text editor -->

		<!-- Container to display Radio Buttom -->
		<div class="d-flex justify-content-between mb-3 buttons ">
			<!-- Two Raio Button to select Text or File -->
			<!-- <label class="primary p-2 rounded" for="saisir_text" style="width: 45%;">
						<input type="radio" checked style="margin-right: 5px;" name="optradio" id="saisir_text"
							mat-raised-button (click)="onSelectTextArea($event)">Saisir un texte</label>

					<label class="primary p-2 rounded" for="upload_file" style="width: 45%;">
						<input type="radio" style="margin-right: 5px;" name="optradio" id="upload_file"
							(click)="onSelectUploadFile($event)">Charger un fichier</label> -->
			<button mat-raised-button [ngClass]="{'clicked': textArea}" style="width: 45%;" class="primary py-2"
				(click)="onSelectTextArea($event)">Saisir un text</button>
			<button mat-raised-button [ngClass]="{'clicked': !textArea}" class="primary py-2" style="width: 45%;"
				(click)="onSelectUploadFile($event)">Charger un fichier</button>
		</div>

		<!-- Container to display Text editor -->
		<div *ngIf="textArea" class="mb-2">
			<div class="textArea" >
				<textarea placeholder="Saisir un texte (10000 caractères maximum) ..." [(ngModel)]="text" maxlength="8000"
					class="rounded "></textarea>
			</div>
	
			<div class="d-flex justify-content-between align-items-center carto mb-1">
				<button *ngIf="textArea" (click)="sendToSpacy($event)" mat-raised-button class="primary"
					[disabled]="!onCartographier" style="width: 45%;">Cartographier</button>
				<button *ngIf="textArea" (click)="clearText()" mat-raised-button class="danger"
					style="width: 45%;">Effacer</button>
			</div>
		</div>

		<div *ngIf="!textArea" style="cursor: pointer;">
			<label for="fileDropReff" class="dropzone mat-elevation-z8 info" style="cursor: pointer;">
				<img src="assets/icons/upload.png" alt="" class="mb-1">

				<input type="file" accept=".txt,.zip" (change)="sendToSpacy($event)" #myInput class="mt-5"
					id="fileDropReff">

				<h5>Cliquez pour téléverser un fichier </h5>
				<h5>(type txt ou zip, taille maximale: 100 ko) </h5>
				<h4 class="warning px-2 rounded">{{fileName}}</h4>
			</label>
		</div>

		<h4 class="text-center danger rounded my-1 msg">{{msg}}</h4>


		<!-- Container to display List Location -->
		<div class="selects mt-1">
			<div *ngIf="msg==='' && loading && fileName" class="spinner"></div>
			<!-- Container to display found location -->
			<div class="mb-2 " *ngIf="allNotDuplicatedCities.length > 0">
				<mat-select placeholder="Lieux trouvés dans la BDD" class="w-100 p-2 white rounded mat-elevation-z8">
					<mat-option *ngFor="let location of noRepeatedCities">
						{{location.city}} - {{location.country}}
					</mat-option>
				</mat-select>
			</div>

			<!-- Container to display unknown location -->
			<div class="mb-2" *ngIf="notFoundCities.length > 0">
				<mat-select placeholder="Lieux non reconnus dans la BDD"
					class="w-100 p-2 warning rounded mat-elevation-z8">
					<mat-option *ngFor="let location of notFoundRepeatedCities">
						{{location.city}}
					</mat-option>
				</mat-select>
			</div>

			<!-- Container to display unknown location -->
			<!--<div class="col-5 py-3" *ngIf="notFoundCities.length > 0">
				<h3 class="text-center white mb-2 mat-elevation-z8 rounded py-2"
					style="display: block; margin:auto;  width:100%">Lieux non reconnus dans la BDD</h3>
				<div [ngClass]="{'rounded height2' :textArea, 'rounded height1' :!textArea}">
					<Div *ngFor="let location of notFoundCities;" class="my-1">
						<span class="danger p-1 my-1 rounded mat-elevation-z8 w-100 d-block">{{location.city}}</span>
					</Div>
				</div>
			</div>-->


		</div>
		<!-- Container to display confused location -->
		<div  *ngIf="duplicatedCities.length > 0" style="height: 47vh;">
			<div class="" >
				<h3 class="text-center white mb-2 mat-elevation-z8 rounded py-2 w-100"
					style="display: block; margin:auto;  width:100%">Lieux ambigus</h3>
				<div [ngClass]="{'rounded height2' :textArea, 'rounded height1' :!textArea}">
					<Div *ngFor="let location of duplicatedCities; let i=index">
						<label for="checkbox{{i}}" class="danger p-1 my-1 rounded mat-elevation-z8"
							style="display: block; margin:auto;  width:100%; margin-bottom:5px">
							<input type="checkbox" id="checkbox{{i}}" (click)="confirmLocation($event,location.id)">
							<span class="ml-1">
								{{location.city}} - {{location.country}}
							</span>
						</label>
					</Div>
				</div>
				<div style="height: 5%vh">
					<button class="primary" mat-raised-button style="display: block; margin:auto;  width:100%"
						(click)="displayOnMap()">Afficher sur la carte</button>
				</div>
			</div>
		</div>
	</div>

	<div class="col-9">
		<!-- Container to display MAP -->
		<div class="row" id="map">
			<!-- Center Icon -->
			
			<!-- Afficher le bouton "centrer" en cas de "selecetionner un nom du fichier" -->
			<button (click)="onSelectText(textSelected)" color="light" mat-mini-fab class="center-button"
				*ngIf="onCenter && !textArea && !onFirsteCenter">
				<mat-icon> my_location</mat-icon>
			</button>

			<!-- Afficher le bouton "centrer" en cas de "selecetionner une date du fichier" -->
			<button (click)="onSelectDate(dateSelected)" color="light" mat-mini-fab class="center-button"
				*ngIf="!onCenter && !textArea && !onFirsteCenter">
				<mat-icon> my_location</mat-icon>
			</button>

			<!-- Afficher le bouton "centrer" en cas de "selecetionner une date du fichier" 
			<button (click)="displayOnMap()" color="light" mat-mini-fab class="center-button"
				*ngIf="!onCenter && textArea && !onFirsteCenter">
				<mat-icon> my_location</mat-icon>
			</button>-->

			<!-- Afficher le bouton "centrer" en cas de "Saisir un text" -->
			<button (click)="displayOnMap()" color="light" mat-mini-fab class="center-button"
				*ngIf="onFirsteCenter">
				<mat-icon> my_location</mat-icon>
			</button>
		</div>

		<!-- Container to display bottom of Map -->
		<div class="row slider d-flex items-align-center" *ngIf="foundCities.length > 0">
			<div class="col mt-1 p-1">
				<!-- Displays file name on button -->
				<div class="row p-1">
					<div class="col-2">
						<button class="light warning rounded mat-elevation-z4" style="border: none;"
							(click)="exportCSV()">Exporter en CSV</button>
					</div>
					<div class="col-2" *ngIf="listOfText.length > 1">
						<button class="light white rounded mat-elevation-z4" style="border: none;"
							(click)="onSelectALl()">All files</button>
					</div>
					<div *ngIf="listOfText.length > 0" class="col-8">
						<button *ngFor="let item of listOfText" (click)="onSelectText(item.legend)"
							class="m-1 rounded mat-elevation-z4 primary" style="border: none;">
							{{item.legend}}
						</button>
					</div>


				</div>
				<!-- Slider for chronic date -->
				<div *ngIf="listOfText.length > 1" class="mt-2">
					<ngx-slider [(value)]="value" [options]="options" [(ngModel)]="dateSelected"
						(mouseup)="onSelectDate(dateSelected)">

					</ngx-slider>
				</div>
			</div>
		</div>
	</div>
</div>
































<!-- <div [ngClass]="{'col-7' :foundCities.length > 0, 'col-9' :foundCities.length === 0}" id="map">
		<button (click)="displayOnMap()" color="light" mat-mini-fab class="center-button"
			*ngIf="foundCities.length > 0 ">
			<mat-icon> my_location</mat-icon>
		</button>
	</div> -->


<!--<mat-form-field class=" mt-3">
				<mat-label>Choose City (choice multiple)</mat-label>
				<mat-select (selectionChange)="confirmCity()" multiple [(ngModel)]="ids">
	
					<mat-option *ngFor="let location of foundCities" value="{{location.id}}">{{location.city}}
						{{location.country}}</mat-option>
				</mat-select>
			</mat-form-field>
	
			<mat-form-field appearance="fill">
				<mat-label>Séléctionner un pays</mat-label>
				<mat-select (selectionChange)="changeCountry()" [(ngModel)]="country">
					<mat-option *ngFor="let row of countries" value="{{row.country}}">{{row.country}}</mat-option>
				</mat-select>
			</mat-form-field>-->